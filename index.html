<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>99å¤©âœ¨</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- Tailwind æ‰©å±•è‰² -->
  <script>
    tailwind.config={
      theme:{
        extend:{
          colors:{
            cute:{
              pink:'#FF85A2',lightpink:'#FFE6EF',purple:'#C792EA',mint:'#89DDFF',
              yellow:'#FFCB74',coral:'#FF7851',rose:'#F15BB5',sky:'#00BBF9',
              lavender:'#9B5DE5',cream:'#FFF9E8'
            }
          },
          fontFamily:{cute:['Nunito','sans-serif']}
        }
      }
    }
  </script>

  <style>
    /* ========== åŸºç¡€æ ·å¼ ========== */
    body {
      font-family: 'Nunito', sans-serif;
      overflow-x: hidden;
    }

    /* ========== å¯åŠ¨ç”»é¢ ========== */
    #intro-screen{
      position:fixed;inset:0;z-index:9999;
      background:#000;
      transition:opacity 1.5s ease-out;
    }
    #intro-screen.intro-fade-out{opacity:0;pointer-events:none}
    #intro-canvas{width:100%;height:100%;display:block}
    #intro-pinkboard{position:absolute;inset:0;width:100%;height:100%}
    #intro-center{
      position:absolute;top:50%;left:50%;
      transform:translate(-50%,-50%);
      font-family:STKaiti,serif;
      font-size:clamp(28px,6vw,48px);
      color:#f584b7;
      pointer-events:none;
      z-index:10;
    }

    /* ========== åŠ¨ç”»å·¥å…·ç±» ========== */
    .text-shadow-cute{text-shadow:1px 1px 3px rgba(0,0,0,.1)}
    .bounce-cute{animation:bounceCute .6s ease infinite alternate}
    .float-cute {animation: floatAround 15s ease-in-out infinite;transition: all 0.3s ease;}
    .rotate-cute{animation:rotateCute 8s linear infinite}
    .sparkle{animation:sparkle 1.5s ease-in-out infinite}
    .photo-flip{animation:flip .8s ease-out}
    .quote-animation{animation:quoteMove var(--duration) ease-in-out forwards}
    .heart-pulse{animation:heartPulse 2s ease-in-out infinite}
    .letter-expand{animation:expandLetter .8s ease-out forwards}
    .letter-collapse{animation:collapseLetter .6s ease-in-out forwards}
    .paper-texture{background-image:url(https://picsum.photos/seed/paper/1000/1000);background-blend-mode:overlay;background-size:cover}
    .heart-float{animation:heartFloat var(--heart-duration) ease-out forwards}
    .modal-fade-in{animation:modalFadeIn .3s ease-out forwards}
    .modal-scale-in{animation:modalScaleIn .3s ease-out forwards}

    /* ========== åŠ¨ç”»å…³é”®å¸§ ========== */
    @keyframes bounceCute{from{transform:translateY(0)}to{transform:translateY(-8px)}}
    @keyframes floatAround {
      0% { transform: translate(0, 0) rotate(0deg); }
      25% { transform: translate(30px, -20px) rotate(5deg); }
      50% { transform: translate(-20px, -40px) rotate(-3deg); }
      75% { transform: translate(10px, -10px) rotate(2deg); }
      100% { transform: translate(0, 0) rotate(0deg); }
    }
    @keyframes rotateCute{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
    @keyframes sparkle{0%,100%{opacity:1}50%{opacity:.7;transform:scale(1.05)}}
    @keyframes flip{0%{transform:rotateY(90deg);opacity:0}100%{transform:rotateY(0);opacity:1}}
    @keyframes quoteMove{0%{transform:rotate(var(--start-rotate)) scale(0);opacity:0}20%{transform:rotate(var(--mid-rotate)) scale(1.1);opacity:1}100%{transform:rotate(var(--end-rotate)) scale(.8);opacity:0}}
    @keyframes heartPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.1)}}
    @keyframes expandLetter{0%{max-height:0;opacity:0;transform:translateY(-20px)}100%{max-height:2000px;opacity:1;transform:translateY(0)}}
    @keyframes collapseLetter{0%{max-height:2000px;opacity:1;transform:translateY(0)}100%{max-height:0;opacity:0;transform:translateY(-20px)}}
    @keyframes heartFloat{0%{transform:translate(0,0) rotate(var(--heart-rotate)) scale(1);opacity:.9}100%{transform:translate(var(--heart-x),var(--heart-y)) rotate(var(--heart-rotate-end)) scale(.3);opacity:0}}
    @keyframes modalFadeIn{from{opacity:0}to{opacity:1}}
    @keyframes modalScaleIn{from{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}

    /* ========== ç…§ç‰‡ç¿»è½¬æ ·å¼ ========== */
    .photo-container {
      perspective: 1000px;
      height: 180px;
    }
    .photo-card {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
      cursor: pointer;
    }
    .photo-front, .photo-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 1rem;
      overflow: hidden;
    }
    .photo-back {
      transform: rotateY(180deg);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      background: linear-gradient(135deg, var(--back-color) 0%, var(--back-color-light) 100%);
      color: white;
      text-align: center;
      font-size: clamp(0.8rem, 2vw, 1rem);
      font-weight: 600;
    }
    .flipped {
      transform: rotateY(180deg);
    }

    /* ========== è½®æ’­å›¾æ ·å¼ ========== */
    .carousel {
      overflow: hidden;
      position: relative;
    }
    .carousel-inner {
      display: flex;
      transition: transform 0.5s ease;
    }
    .carousel-page {
      min-width: 100%;
    }
    .carousel-nav {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .carousel-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: #ddd;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .carousel-dot.active {
      background-color: #FF85A2;
    }
    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(255, 255, 255, 0.7);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
      transition: all 0.3s;
    }
    .carousel-btn:hover {
      background-color: white;
      transform: translateY(-50%) scale(1.1);
    }
    .prev-btn {
      left: 10px;
    }
    .next-btn {
      right: 10px;
    }

    /* ========== å›¾ç‰‡æŸ¥çœ‹å™¨æ ·å¼ ========== */
    #imageViewer {
      opacity: 0;
      transition: opacity 0.3s ease-out;
    }
    #imageViewer.active {
      opacity: 1;
    }
    #previewImage {
      transform: scale(0.95);
      transition: transform 0.3s ease-out;
    }
    #imageViewer.active #previewImage {
      transform: scale(1);
    }
  </style>
</head>

<body class="font-cute text-gray-800 overflow-x-hidden bg-black">
  <!-- ==================== å¯åŠ¨ç”»é¢ ==================== -->
  <div id="intro-screen">
    <!-- é»‘å®¢æ–‡å­—é›¨ -->
    <canvas id="intro-canvas"></canvas>
    <!-- çˆ±å¿ƒç²’å­ -->
    <canvas id="intro-pinkboard"></canvas>
    <!-- ä¸­å¤®æ–‡å­— -->
    <div id="intro-center">love u</div>
  </div>

  <!-- ==================== ä¸»é¡µé¢ ==================== -->
  <div id="main-content" class="bg-cute-lightpink min-h-screen">
    <!-- é¼ æ ‡è·Ÿéšçˆ±å¿ƒå®¹å™¨ -->
    <div id="mouseHearts" class="fixed inset-0 pointer-events-none z-20 overflow-hidden"></div>

    <main class="relative z-10 max-w-5xl mx-auto px-4 py-6">
      <!-- é¡¶éƒ¨æ ‡é¢˜ -->
      <header class="pt-12 pb-6 px-4 text-center">
        <div class="inline-block relative">
          <h1 id="timeCounter" class="text-[clamp(2rem,6vw,3.8rem)] font-extrabold text-cute-pink mb-2 bounce-cute">è®¡ç®—ä¸­...</h1>
          <span class="absolute -top-4 -right-6 text-cute-yellow text-2xl rotate-cute"><i class="fa fa-star"></i></span>
        </div>
        <p class="text-[clamp(1rem,2vw,1.3rem)] text-gray-700 max-w-xl mx-auto mt-4">
          å’Œä½ åœ¨ä¸€èµ·å¾ˆå¹¸ç¦ï½ ğŸ’–
        </p>
        <div class="mt-4 flex justify-center gap-4">
          <span class="w-2 h-2 bg-cute-pink rounded-full"></span>
          <span class="w-2 h-2 bg-cute-purple rounded-full"></span>
          <span class="w-2 h-2 bg-cute-mint rounded-full"></span>
          <span class="w-2 h-2 bg-cute-yellow rounded-full"></span>
        </div>
      </header>

      <!-- åŠŸèƒ½æŒ‰é’® -->
      <div class="flex flex-col sm:flex-row justify-center gap-4 mb-10 flex-wrap">
        <button id="loveBtn" class="bg-gradient-to-r from-cute-pink to-cute-rose text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-2 sparkle">
          <i class="fa fa-heart heart-pulse"></i><span>ä¸€äº›è¯</span>
        </button>
        <button id="letterBtn" class="bg-gradient-to-r from-cute-yellow to-cute-coral text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-2 sparkle">
          <i class="fa fa-envelope heart-pulse"></i><span>ç»™ä½ çš„ä¿¡</span>
        </button>
        <button id="audioBtn" class="bg-gradient-to-r from-cute-mint to-cute-sky text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center gap-2 sparkle">
          <i class="fa fa-music heart-pulse"></i><span>listen</span>
        </button>

<!-- éŸ³é¢‘æ’­æ”¾å™¨ (é»˜è®¤éšè—) -->
<div id="audioPlayer" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-white/90 backdrop-blur-sm rounded-full shadow-xl p-3 z-40 hidden flex items-center gap-4 max-w-md w-full mx-4">
  <button id="togglePlay" class="w-10 h-10 bg-cute-mint rounded-full flex items-center justify-center text-white">
    <i class="fa fa-play"></i>
  </button>
  <div class="flex-1 min-w-0">
    <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
      <div id="progressBar" class="h-full bg-cute-sky w-0 transition-all"></div>
    </div>
    <div class="flex justify-between text-xs text-gray-500 mt-1">
      <span id="currentTime">00:00</span>
      <span id="totalTime">00:00</span>
    </div>
  </div>
  <button id="closeAudio" class="w-8 h-8 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 flex items-center justify-center">
    <i class="fa fa-times"></i>
  </button>
</div>
      </div>

      <!-- å›å¿†æ€è½®æ’­åŒº -->
      <section class="bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl p-4 md:p-6 mb-10" id="photoSection">
        <h2 class="text-xl md:text-2xl font-bold text-cute-pink mb-6 text-center"><i class="fa fa-camera-retro mr-2"></i>ä¸€äº›moment</h2>
        
        <div class="carousel">
          <div class="carousel-inner" id="carouselInner"></div>
          
          <button class="carousel-btn prev-btn" id="prevBtn">
            <i class="fa fa-chevron-left text-cute-pink"></i>
          </button>
          <button class="carousel-btn next-btn" id="nextBtn">
            <i class="fa fa-chevron-right text-cute-pink"></i>
          </button>
          
          <div class="carousel-nav" id="carouselNav"></div>
        </div>
        
        <p class="text-center mt-6 text-gray-600 text-sm">å•å‡»ç…§ç‰‡ç¿»è½¬ | åŒå‡»æŸ¥çœ‹å¤§å›¾ï½</p>
      </section>

      <!-- æƒ…ä¹¦åŒºåŸŸ -->
      <section class="max-w-3xl mx-auto mb-10 relative z-10">
        <div id="letterContainer" class="bg-cute-cream/90 paper-texture rounded-3xl shadow-xl overflow-hidden border-2 border-cute-yellow/30">
          <div id="letterContent" class="p-6 md:p-8 hidden overflow-hidden">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-2xl md:text-3xl font-bold text-cute-rose flex items-center"><i class="fa fa-heart mr-3 text-cute-pink"></i>è‡´æˆ‘æœ€æœ€æœ€çˆ±çš„å®å®</h2>
              <span class="text-cute-yellow font-semibold">99å¤©çºªå¿µ</span>
            </div>
            <div class="space-y-4 text-gray-700 leading-relaxed">
              <p>äº²çˆ±çš„ï¼š</p>
              <p>æˆ‘æ‰¿è®¤æˆ‘æ˜¯ä¸€ä¸ªåˆ«æ‰­åˆå¤æ‚çš„å°å­©ã€‚æˆ‘ä¸€ç›´åœ¨ç­‰ï¼Œç­‰ä¸€ä¸ªäººå¯ä»¥æ‡‚æˆ‘çš„æ•æ„Ÿä¸æ™¦æ¶©ï¼Œç­‰ä¸€ä¸ªäººçŸ¥æˆ‘çš„å›é€†ä¸ç–¯ç‹‚ï¼Œç­‰ä¸€ä¸ªäººå’Œæˆ‘ä¸€èµ·å»åƒæ±¤æ±¤ç²‰ç²‰æ—¥æ–™è¥¿é¤ç«é”…ä¸²ä¸²å’Œè·¯è¾¹çš„æ—©é¤ï¼Œç­‰ä¸€ä¸ªäººæ¥ä½æˆ‘çš„æƒ…ç»ªå’Œå •è½ï¼Œç­‰ä¸€ä¸ªäººæ¥çˆ±æˆ‘ã€‚ç»ˆäºï¼Œä½ å‡ºç°äº†ã€‚æ˜¯æ„å¤–ï¼Œä¹Ÿæ˜¯æƒŠå–œã€‚æœ‰çš„æ—¶å€™æˆ‘åœ¨ä½ èº«ä¸Šçœ‹åˆ°æŸç§ç†Ÿæ‚‰çš„åº•è‰²ï¼Œåƒæ˜¯åœ¨é•œä¸­ä¸å¦ä¸€ä¸ªè‡ªå·±ç›¸é‡ï¼›æœ‰çš„æ—¶å€™æˆ‘åˆå‘è§‰æˆ‘ä»¬åƒå¥‘åˆçš„ä¸¤å—æ‹¼å›¾ï¼Œæˆ‘çš„æ®‹ç¼ºï¼Œä½ åˆšå¥½å»åˆã€‚æˆ‘å¼€å§‹æ…¢æ…¢å­¦ç€ä¿¡ä»»ï¼Œå­¦ç€å»çˆ±ã€‚</p>
              <p>æˆ‘ä¸€ç›´ä¸æ˜ç™½çˆ±æ˜¯ä»€ä¹ˆã€‚å¯¹æˆ‘æ¥è¯´ï¼Œçˆ±å¤ªè™šæ— ç¼¥ç¼ˆï¼Œç››å¤§åˆé¥è¿œã€‚åƒé˜³å…‰ä¸‹çš„æ³¡æ²«ï¼Œè§¦ç¢°çš„é‚£ä¸€åˆ»ï¼Œå°±ä¼šæ¶ˆå¤±ã€‚äºæ˜¯æˆ‘å¼€å§‹å®‰æ…°è‡ªå·±ï¼Œçˆ±æƒ…åªæ˜¯è°ƒå‘³å“ï¼Œå¯æœ‰å¯æ— ï¼Œè¿™æ ·å°±ä¸ä¼šå› ä¸ºæ¡ä¸ä½è€Œå¤±è½ã€‚ä½†æ˜¯å’Œä½ åœ¨ä¸€èµ·ä¹‹åï¼Œçˆ±æˆäº†å¾ˆå¤šå…·ä½“çš„ç¬é—´â€”â€”ä¸‹é›¨æ—¶é‚£æŠŠå€¾æ–œçš„ä¼ï¼Œå´©æºƒæ—¶é‚£åŒè½»æ‹æˆ‘å®‰æŠšçš„æ‰‹ï¼Œæ•£æ­¥æ—¶è½¬å¤´çœ‹åˆ°ä½ çš„ä¾§è„¸ï¼Œæ‹¥æŠ±æ—¶ç‚½çƒ­çš„ä½“æ¸©å’Œç†Ÿæ‚‰çš„å‘³é“ï¼Œå¯¹è§†æ—¶é‚£åŒäº®äº®çš„çœ¼ç›ï¼Œéƒ½è®©æˆ‘å†ä¹Ÿæ— æ³•å¦è®¤ï¼Œçˆ±æ˜¯å¦‚æ­¤çœŸå®ï¼Œè€Œæˆ‘æ˜¯çœŸçš„çˆ±ä½ ã€‚</p>
              <p>è¿™ä¸ªä¸–ç•Œå¤ªä¸¥å‰äº†ï¼Œå¦‚æœæ²¡æœ‰çˆ±çš„è¯ï¼Œä¸€ä¸ªäººèµ°ï¼Œæœªå…å¤ªè¾›è‹¦äº†ã€‚çˆ±æ˜¯æˆ‘ä»¬æˆåŒçš„å½±å­ï¼Œä»æ­¤å†ä¹Ÿä¸æ€•æµªè¿¹å¤©æ¶¯ã€‚</p>
              <p>æˆ‘æ€»åƒè¢«å›°åœ¨ä¸€ä¸ªç¬¼å­é‡Œï¼Œç„¦è™‘åˆç–²æƒ«ï¼Œåœ¨ä¸€ä»¶åˆä¸€ä»¶äº‹æƒ…ä¸Šåå¤é’»ç€ç‰›è§’å°–ã€‚ä½ åƒæ˜¯æˆ‘çš„é•‡é™å‰‚ï¼Œä»…ä»…æ˜¯è¢«ä½ æ‹¥åœ¨æ€€ä¸­ï¼Œé—»ä½ èº«ä¸Šçš„å‘³é“ï¼Œå°±èƒ½è®©æˆ‘å®‰å¿ƒå¾ˆå¤šï¼Œæ”¾æ¾å¾ˆå¤šã€‚ä½ æ˜¯æˆ‘ç–²æƒ«ç”Ÿæ´»çš„è§£è¯ã€‚æˆ‘ä»¬ä¹‹é—´ä¹Ÿä¼šæœ‰å¾ˆå¤šäº‰åµï¼Œæ€€ç–‘ï¼Œå¯åœ¨çˆ±é¢å‰å°±æ˜¾å¾—å¤ªè¿‡æ¸ºå°ã€‚ä½ æ€»æ˜¯æ‹…å¿ƒä»¥åæˆ‘ä¼šä¸ä¼šç¦»å¼€ä½ ï¼Œä½†æ˜¯ä½ è¦ç›¸ä¿¡ï¼Œæˆ‘åªæœ‰ä½ ä¸€ä¸ªï¼Œä¹Ÿåªè¦ä½ ä¸€ä¸ªã€‚</p>
              <p>ä½ è¯´æˆ‘æ²¡å°è¿‡çˆ±æƒ…çš„ç”œã€‚è¿™æ¬¡ï¼Œç»ˆäºä¹Ÿæ˜¯è½®åˆ°æˆ‘äº†ã€‚ä¸–ç•Œä¸Šæ²¡æœ‰å¤©ç”Ÿåˆé€‚çš„ä¸¤ä¸ªäººï¼Œæˆ‘ä»¬ä¹Ÿæœ‰å¾ˆå¤šäº‰åµå¾ˆå¤šä¸å¼€å¿ƒï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯çˆ±ä½ ã€‚æˆ‘ç›¸ä¿¡åªè¦æˆ‘ä»¬è¿˜æ˜¯ä¸€æ ·çš„æƒ³æ³•ï¼Œäº‰åµä¹Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬æœ€ç»ˆè¿˜æ˜¯ä¼šæ‹¼å‡‘å‡ºæƒ³è¦çš„ç»“æœã€‚</p>
              <p>99å¤©åªæ˜¯å¼€å§‹ï¼Œä½ åƒç¤¼ç‰©ä¸€æ ·å‡ºç°äº†ï¼Œé™ªæˆ‘ä»æ–°é²œæ„Ÿèµ°åˆ°å½’å±æ„Ÿï¼Œé™ªä¼´èƒœè¿‡æ‰€æœ‰æ‰¿è¯ºã€‚è™½ç„¶æˆ‘ä»¬ä¸¤ä¸ªçš„æ„Ÿæƒ…è¿œè¿œè¶…è¿‡äº†99å¤©ï¼Œä½†æ˜¯è¿™ä¸ªæ—¥æœŸå¯¹æˆ‘æ¥è¯´è¿˜æ˜¯æœ‰å¾ˆå¤§çš„æ„ä¹‰ã€‚ä½ ä¹Ÿäº†è§£ï¼Œæˆ‘ç¡®å®æ˜¯ä¸ªå›ºæ‰§çš„äººï¼Œæ‰€ä»¥æ— è®ºæˆ‘ä»¬ä¸¤ä¸ªå·²ç»å¤šä¹ˆå¥½äº†ï¼Œä½†æ˜¯æˆ‘ç»ˆç©¶éœ€è¦ä¸€ä¸ªåˆ’åˆ†æˆ‘ä»¬å…³ç³»çš„ç¬é—´ï¼Œè¿™ä¸ªç¬é—´è®©æˆ‘å®‰å¿ƒï¼Œè®©æˆ‘çœŸçœŸåˆ‡åˆ‡æ„Ÿå—åˆ°ï¼Œä½ æ˜¯æˆ‘çš„ã€‚æˆ‘æƒ³å’Œä½ ä¸€èµ·èµ°è¿‡æ›´å¤šçš„æ˜¥å¤ç§‹å†¬ã€‚</p>
              <p>è¿™ä¸ªç½‘é¡µæ–­æ–­ç»­ç»­åšäº†å¾ˆå¤šå¤©ï¼Œå› ä¸ºæˆ‘ä¹Ÿç¡®å®æ˜¯æ¯”è¾ƒå¿™ã€‚å…¶å®å¾ˆå¤šæ¬¡æƒ³ä¸è¦åšäº†ï¼Œå› ä¸ºå¤šçœ‹å‡ æ¬¡æˆ‘è§‰å¾—å¥½ä¸‘å•Šå¥½å†…ä¸ªå•Šåˆå¥½è‚‰éº»ï¼Œå•Šå•Šå•Šå•Šã€‚è€Œä¸”æˆ‘æ°´å¹³æœ‰é™......åˆšåšå‡ºæ¥æ„Ÿè§‰è‡ªå·±è¿˜æŒºç‰›çš„ï¼Œä½†æ˜¯å¤šçœ‹å‡ æ¬¡æ„Ÿè§‰....ä¸‘ä¸‘çš„åœŸåœŸçš„ã€‚å…¶å®æˆ‘è·Ÿä½ è¯´è¿‡ï¼Œæˆ‘æ²¡é‚£ä¹ˆå–œæ¬¢æ•²ä»£ç ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å¾ˆæƒ³æŠŠæˆ‘ä»¬ä¸¤ä¸ªè®°å½•ä¸‹æ¥ï¼Œä»¥å„ç§æ–¹å¼ã€‚å½“æˆ‘ä¸€ç‚¹ä¸€ç‚¹æŠŠæˆ‘å’Œä½ æ”¾è¿›æ¥ï¼Œæ•²ä»£ç ï¼Œå¥½åƒä¹Ÿæ²¡æœ‰é‚£ä¹ˆè®¨åŒã€‚æœç„¶ï¼Œçˆ±å’Œè¢«çˆ±ï¼Œéƒ½å¾ˆå¹¸ç¦ã€‚</p>
              <p>è¿˜æœ‰é‚£ä¸ªå½•éŸ³ï¼Œæ˜¯æˆ‘æš‘å‡çš„æ—¶å€™å°±å½•å¥½äº†ï¼Œæ‰“ç®—æˆ‘ä»¬100å¤©çš„æ—¶å€™å†ç»™ä½ å¬ï¼Œå› ä¸ºæˆ‘çŸ¥é“ï¼Œæˆ‘ä»¬ä¸€å®šä¼šèµ°åˆ°æˆ‘ä»¬çš„100å¤©ã€‚ï¼ˆèƒŒæ™¯èƒ½å¬åˆ°æ‰‹æœºéœ‡åŠ¨ï¼Œé‚£æ˜¯ä½ åœ¨ç»™æˆ‘å‘æ¶ˆæ¯å˜»å˜»ï¼‰é¡µé¢å’Œå½•éŸ³ä½ éƒ½ä¸è®¸å«Œå¼ƒï¼ï¼ä¸ç„¶æˆ‘æ‰“æ­»ä½ ï¼</p>
              <p>çŸ¥é“ä½ ä¸çˆ±çœ‹å­—ï¼Œä½†æ˜¯æ€»æœ‰å¾ˆå¤šè¯è¯´ä¸å‡ºå£ï¼Œåˆæƒ³è®©ä½ çŸ¥é“ã€‚è¿™æ¬¡ä¸å‡†å¤‡å†™å¾ˆé•¿çš„ï¼Œæ€•ä½ æ²¡è€å¿ƒçœ‹ï¼Œä½†æ˜¯è¿˜æ˜¯å•°å•°å—¦å—¦äº†é‚£ä¹ˆå¤šã€‚æ€»ä¹‹ï¼Œä¸€å®šè®°ä½ï¼Œæˆ‘çˆ±ä½ ã€‚</p>
              <p class="font-bold text-cute-pink mt-6">è±</p>
              <p class="text-right text-gray-500">2026å¹´ Â· æˆ‘ä»¬çš„99å¤©</p>
            </div>
            <div class="mt-8 flex justify-center gap-6">
              <div class="w-12 h-12 bg-cute-pink/20 rounded-full flex items-center justify-center float-cute"><i class="fa fa-heart text-xl text-cute-pink"></i></div>
              <div class="w-10 h-10 bg-cute-purple/20 rounded-full flex items-center justify-center float-cute" style="animation-delay:.5s"><i class="fa fa-star text-xl text-cute-purple"></i></div>
              <div class="w-12 h-12 bg-cute-yellow/20 rounded-full flex items-center justify-center float-cute" style="animation-delay:1s"><i class="fa fa-kiss-wink-heart text-xl text-cute-yellow"></i></div>
            </div>
          </div>
        </div>
      </section>

      <!-- è£…é¥° -->
      <div class="flex justify-center gap-6 mb-12 flex-wrap">
        <div class="w-14 h-14 bg-cute-pink/20 rounded-full flex items-center justify-center float-cute"><i class="fa fa-heart text-xl text-cute-pink"></i></div>
        <div class="w-16 h-16 bg-cute-purple/20 rounded-full flex items-center justify-center float-cute" style="animation-delay:.5s"><i class="fa fa-gift text-xl text-cute-purple"></i></div>
        <div class="w-14 h-14 bg-cute-mint/20 rounded-full flex items-center justify-center float-cute" style="animation-delay:1s"><i class="fa fa-smile-o text-xl text-cute-mint"></i></div>
        <div class="w-16 h-16 bg-cute-yellow/20 rounded-full flex items-center justify-center float-cute" style="animation-delay:1.5s"><i class="fa fa-star text-xl text-cute-yellow"></i></div>
      </div>
    </main>

    <footer class="relative z-10 py-8 px-4 text-center">
      <p class="text-cute-pink font-semibold text-lg">å¸Œæœ›å’Œä½ æ°¸è¿œå¹¸ç¦ä¸‹å»ï½ âœ¨â¤ï¸âœ¨</p>
      <p class="text-gray-600 text-sm mt-2">æˆ‘ä»¬çš„ Â· ç¬¬ 99 å¤©ï¼</p>
    </footer>

    <!-- ==================== å¼¹çª—ç»„ä»¶ ==================== -->
    <!-- æ»¡å±æƒ…è¯å¼¹çª— -->
    <div id="loveModal" class="fixed inset-0 bg-white z-50 hidden overflow-hidden">
      <div class="absolute top-6 right-6 z-20">
        <button id="closeLoveModal" class="bg-cute-pink/10 hover:bg-cute-pink/20 text-cute-pink w-12 h-12 rounded-full flex items-center justify-center shadow-md transition-all transform hover:scale-110"><i class="fa fa-times text-xl"></i></button>
      </div>
      <div id="quotesContainer" class="fixed inset-0 overflow-hidden"></div>
      <div class="absolute bottom-4 left-0 right-0 flex justify-center gap-3 z-10">
        <span class="w-3 h-3 bg-cute-pink rounded-full animate-pulse"></span>
        <span class="w-3 h-3 bg-cute-purple rounded-full animate-pulse" style="animation-delay:.3s"></span>
      </div>
    </div>

    <!-- å¯†ç å¼¹çª— -->
    <div id="passwordModal" class="fixed inset-0 bg-black/50 z-50 hidden modal-fade-in flex items-center justify-center p-4">
      <div class="bg-white rounded-3xl shadow-2xl p-6 md:p-8 w-full max-w-md modal-scale-in relative">
        <div class="text-center mb-6">
          <div class="w-16 h-16 bg-cute-pink/20 rounded-full flex items-center justify-center mx-auto mb-4 float-cute"><i class="fa fa-lock text-2xl text-cute-pink"></i></div>
          <h3 class="text-2xl font-bold text-cute-rose">è¿™æ˜¯ä¸€å°ç§å¯†ä¿¡ä»¶</h3>
          <p class="text-gray-600 mt-2">è¯·è¾“å…¥å¯†ç è§£é”å†…å®¹</p>
        </div>
        <div class="mb-4">
          <div class="relative">
            <input type="password" id="passwordInput" class="w-full px-5 py-3 rounded-xl border-2 border-gray-200 focus:border-cute-pink focus:outline-none transition-all" placeholder="è¯·è¾“å…¥å¯†ç ">
            <button id="togglePassword" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-cute-pink"><i class="fa fa-eye-slash"></i></button>
          </div>
          <p id="passwordError" class="text-red-500 text-sm mt-2 hidden text-center">å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•</p>
        </div>
        <button id="submitPassword" class="w-full bg-gradient-to-r from-cute-pink to-cute-rose text-white font-bold py-3 px-6 rounded-xl shadow-md hover:shadow-lg transition-all transform hover:scale-[1.02]">è§£é”ä¿¡ä»¶</button>
      </div>
    </div>

    <!-- å›¾ç‰‡æŸ¥çœ‹å™¨å¼¹çª— -->
    <div id="imageViewer" class="fixed inset-0 bg-black/90 z-50 hidden flex items-center justify-center p-4">
      <button id="closeImageViewer" class="absolute top-6 right-6 text-white w-12 h-12 rounded-full flex items-center justify-center hover:bg-white/20 transition-all">
        <i class="fa fa-times text-xl"></i>
      </button>
      <img id="previewImage" src="" alt="å¤§å›¾é¢„è§ˆ" class="max-w-[90%] max-h-[90vh] object-contain" />
    </div>
  </div>

  <!-- èƒŒæ™¯çˆ±å¿ƒå®¹å™¨ -->
  <div id="floatingHearts" class="fixed inset-0 pointer-events-none z-0"></div>

  <!-- ==================== è„šæœ¬åŒºåŸŸ ==================== -->
  <script>
    /* ==================== 1. å¯åŠ¨ç”»é¢é€»è¾‘ ==================== */
    (function(){
      /* é»‘å®¢æ–‡å­—é›¨ */
      const canvas=document.getElementById('intro-canvas'),ctx=canvas.getContext('2d');
      canvas.width=window.innerWidth;canvas.height=window.innerHeight;
      const texts='I LOVE U'.split(''),fontSize=16,columns=canvas.width/fontSize,drops=[];
      for(let i=0;i<columns;i++)drops[i]=1;
      function drawRain(){
        ctx.fillStyle='rgba(0,0,0,.05)';ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle='#f584b7';ctx.font=fontSize+'px arial';
        for(let i=0;i<drops.length;i++){
          const text=texts[Math.floor(Math.random()*texts.length)];
          ctx.fillText(text,i*fontSize,drops[i]*fontSize);
          if(drops[i]*fontSize>canvas.height||Math.random()>.95)drops[i]=0;
          drops[i]++;
        }
      }
      const rainId=setInterval(drawRain,33);

      /* çˆ±å¿ƒç²’å­ */
      const introBoard=document.getElementById('intro-pinkboard'),ictx=introBoard.getContext('2d');
      introBoard.width=window.innerWidth;introBoard.height=window.innerHeight;
      const settings={particles:{length:500,duration:2,velocity:100,effect:-.75,size:30}};
      function Point(x,y){this.x=x||0;this.y=y||0}Point.prototype.clone=function(){return new Point(this.x,this.y)};
      Point.prototype.length=function(l){const a=Math.atan2(this.y,this.x);this.x=Math.cos(a)*l;this.y=Math.sin(a)*l;return this};
      function Particle(){this.position=new Point();this.velocity=new Point();this.acceleration=new Point();this.age=0}
      Particle.prototype.update=function(dt){this.position.x+=this.velocity.x*dt;this.position.y+=this.velocity.y*dt;this.velocity.x+=this.acceleration.x*dt;this.velocity.y+=this.acceleration.y*dt;this.age+=dt};
      Particle.prototype.draw=function(ctx,img){const ease=t=>{t--;return t*t*t+1},s=img.width*ease(this.age/settings.particles.duration);ctx.globalAlpha=1-this.age/settings.particles.duration;ctx.drawImage(img,this.position.x-s/2,this.position.y-s/2,s,s)};
      function ParticlePool(len){const p=new Array(len);for(let i=0;i<len;i++)p[i]=new Particle();let firstActive=0,firstFree=0;this.add=function(x,y,dx,dy){p[firstFree].position.x=x;p[firstFree].position.y=y;p[firstFree].velocity.x=dx;p[firstFree].velocity.y=dy;p[firstFree].acceleration.x=dx*settings.particles.effect;p[firstFree].acceleration.y=dy*settings.particles.effect;p[firstFree].age=0;firstFree++;if(firstFree===len)firstFree=0};this.update=function(dt){let i;if(firstActive<firstFree)for(i=firstActive;i<firstFree;i++)p[i].update(dt);if(firstFree<firstActive){for(i=firstActive;i<len;i++)p[i].update(dt);for(i=0;i<firstFree;i++)p[i].update(dt)}while(p[firstActive].age>=settings.particles.duration&&firstActive!==firstFree){firstActive++;if(firstActive===len)firstActive=0}};this.draw=function(ctx,img){if(firstActive<firstFree)for(i=firstActive;i<firstFree;i++)p[i].draw(ctx,img);if(firstFree<firstActive){for(i=firstActive;i<len;i++)p[i].draw(ctx,img);for(i=0;i<firstFree;i++)p[i].draw(ctx,img)}}}
      (function(cvs){
        const ctx=cvs.getContext('2d'),particles=new ParticlePool(settings.particles.length),rate=settings.particles.length/settings.particles.duration;let time;
        function pointOnHeart(t){return new Point(160*Math.pow(Math.sin(t),3),130*Math.cos(t)-50*Math.cos(2*t)-20*Math.cos(3*t)-10*Math.cos(4*t)+25)}
        const image=(function(){
          const c=document.createElement('canvas'),x=c.getContext('2d');c.width=c.height=settings.particles.size;
          function to(t){const p=pointOnHeart(t);p.x=settings.particles.size/2+p.x*settings.particles.size/350;p.y=settings.particles.size/2-p.y*settings.particles.size/350;return p}
          x.beginPath();let t=-Math.PI,p=to(t);x.moveTo(p.x,p.y);while(t<Math.PI){t+=.01;p=to(t);x.lineTo(p.x,p.y)}x.closePath();x.fillStyle='#ea80b0';x.fill();
          const img=new Image();img.src=c.toDataURL();return img
        })();
        function render(){
          requestAnimationFrame(render);const newTime=Date.now()/1000,dt=newTime-(time||newTime);time=newTime;
          ctx.clearRect(0,0,cvs.width,cvs.height);const amount=rate*dt;
          for(let i=0;i<amount;i++){const pos=pointOnHeart(Math.PI-2*Math.PI*Math.random()),dir=pos.clone().length(settings.particles.velocity);particles.add(cvs.width/2+pos.x,cvs.height/2-pos.y,dir.x,-dir.y)}
          particles.update(dt);particles.draw(ctx,image)
        }
        window.onresize=()=>{cvs.width=window.innerWidth;cvs.height=window.innerHeight};
        setTimeout(()=>{window.onresize();render()},10)
      })(introBoard);

      /* 5ç§’åæ·¡å‡ºå¯åŠ¨ç”»é¢ */
      setTimeout(()=>{
        document.getElementById('intro-screen').classList.add('intro-fade-out');
        clearInterval(rainId);
        setTimeout(()=>{
          document.getElementById('main-content').style.opacity='1';
          document.getElementById('main-content').style.transition='opacity 1s ease-in';
        },1000);
      },5000);
    })();

    /* ==================== 2. ä¸»é¡µé¢é€»è¾‘ ==================== */
    (function(){
      // é…ç½®å¸¸é‡
      const CORRECT_PASSWORD='251007'; // æƒ…ä¹¦å¯†ç 
      const START_DATE = new Date('2025-10-07'); // è®¡æ—¶èµ·å§‹æ—¥æœŸ
      
      // 3é¡µç…§ç‰‡ï¼ˆæ¯é¡µ8å¼ ï¼‰
      const photos = [
        [
          './img/1.jpg',
          './img/2.jpg',
          './img/3.jpg',
          './img/12.jpg',
          './img/5.jpg',
          './img/6.jpg',
          './img/7.jpg',
          './img/8.jpg'
        ],
        [
          './img/9.png',
          './img/10.png',
          './img/11.jpg',
          './img/4.jpg',
          './img/13.png',
          './img/14.jpg',
          './img/15.jpg',
          './img/16.jpg'
        ],
        [
          './img/17.jpg',
          './img/18.jpg',
          './img/19.jpg',
          './img/20.jpg',
          './img/21.jpg',
          './img/22.jpg',
          './img/23.jpg',
          './img/24.jpg'
        ]
      ];
      
      // ç…§ç‰‡èƒŒé¢çš„æƒ…è¯
      const photoQuotes = [
        "å–œæ¬¢å’Œä½ è´´è´´~",
        "æ°¸è¿œéƒ½è¦ç‰µç€æ‰‹å“¦ğŸ‘«",
        "ä¸€èµ·å»å¤©æ´¥ï¼Œæ²¡åŒ–å¦†å°±è£¹è¿™ä¹ˆä¸¥å®ğŸ˜„",
        "å¾ˆå–œæ¬¢çš„å®˜å®£ç…§ç‰‡~~",
        "èººæˆ‘è…¿ä¸Šç¡è§‰å¾ˆåƒä¸€åªå°ç‹—ç‹—ğŸ¶",
        "ä¸€èµ·çœ‹ç”µå½±å·å·æ‹çš„~å·å·ç‰µæ‰‹",
        "ç»™æˆ‘æè…¿å˜»å˜»",
        "è¢«å·æ‹äº†ï¼Œå¼€å¿ƒ~",
        "ç¬¬ä¸€æ¬¡ä¸€èµ·å»æ—…æ¸¸~ï¼ˆè™½ç„¶å¾ˆè¿‘ï¼‰",
        "å–œæ¬¢å’Œä½ ä¸€èµ·é€›å…¬å›­ğŸ˜˜",
        "é™ªæˆ‘é€›é‚£ä¹ˆä¹…ç´¯åäº†æˆ‘çš„å®ğŸ’¤",
        "ä¹±æ‹çš„å°å°å¹¸ç¦ğŸ’—",
        "å¤©æ´¥äº”å¤§é“ï¼ˆæ‹çš„æˆ‘æœ‰ç‚¹ä¸‘ï¼‰",
        "è¿™å¼ æ‹çš„æˆ‘æœ‰ç‚¹å¥½çœ‹ï¼Œå–œæ¬¢~~",
        "æˆ‘ä»¬çš„ï¼ç¬¬ä¸€ä¸ªå†¬â„ï¸ä»Šæœè‹¥æ˜¯åŒæ·‹é›ªï¼Œæ­¤ç”Ÿä¹Ÿç®—å…±ç™½å¤´",
        "å°ç‹—å°±æ˜¯å¦‚æ­¤ä¹‹èŒï¼",
        "å…‰æ˜¯çœ‹å½±å­éƒ½è§‰å¾—å¥½å¹¸ç¦",
        "å“å‘€çœŸçš„å¥½æƒŠå–œå•Šä½ ä¸»åŠ¨é€æˆ‘åœ£è¯ç¤¼ç‰©",
        "å°çŒªå’Œå°ç‹—~",
        "æˆ‘æ‹çš„ï¼",
        "å˜»å˜»è®°å¾—é‚£å¤©æ˜¯æˆ‘æŠŠä½ æƒ¹ç”Ÿæ°”äº†",
        "ä½ ç­”åº”æˆ‘çš„ï¼Œç­‰æˆ‘æ¯•ä¸šå†è·Ÿæˆ‘å»ä¸€æ¬¡ä»€åˆ¹æµ·",
        "å…¶å®æˆ‘ä¸€ç›´è®°å¾—å½“æ—¶ç§‹å¤©çš„ç¬¬ä¸€æ¯å¥¶èŒ¶",
        "æˆ‘å®å®é€åˆ°é—¨å£çš„å¤œå®µéå¸¸ä¹‹ç¾å‘³"
      ];
      
      // æ»¡å±æƒ…è¯æ–‡æ¡ˆ
      const loveQuotes=[
        'æˆ‘æ°¸è¿œåœ¨ä½ èº«è¾¹', 'å¸Œæœ›æ¯å¹´éƒ½æœ‰ä½ ', '99å¤©åªæ˜¯å¼€å§‹å‘€ï¼', 'æˆ‘æƒ³ä¸€ç›´é™ªç€ä½ ',
        'æˆ‘ä»¬ä¸€å®šè¦ä¸€ç›´ä¸€ç›´åœ¨ä¸€èµ·', 'ä½ æ˜¯æˆ‘çš„é å±±', 'è¦å’Œä½ åƒå¥½å¤šé¥­ï¼', 'æœ€å–œæ¬¢é»ç€ä½ å•¦ï½',
        'ä½ æ˜¯æˆ‘æœ€æœ€æœ€çˆ±çš„å°å°ç‹—ï¼', 'æœ‰ä½ åœ¨æ¯å¤©éƒ½å¼€å¿ƒï¼', 'æˆ‘ä¸€ç›´éƒ½åœ¨', '99å¤©å¿«ä¹ï¼',
        'æ½®èµ·æ½®è½äººèšäººæ•£æˆ‘ä»¬æ°¸è¿œæ˜¯æˆ‘ä»¬', 'è¶…çº§è¶…çº§çˆ±ä½ ï¼', 'è¦çœŸè¯šè¦ä¸€ç›´çˆ±æˆ‘', 'æˆ‘ä¸ä¼šè®©ä½ è¾“',
        'æˆ‘ä»¬è¦æˆä¸ºå¯¹æ–¹æœ€æœ€é‡è¦çš„äºº', 'æˆ‘ä¸€ç›´çˆ±ä½ ï¼Œä½ å¯ä»¥åå¤ç¡®è®¤', 'æœ‰å¹¸ç›¸é‡ï¼Œæ°å¥½åˆæ‹',
        'æ²¡æœ‰ä»€ä¹ˆé¿é£æ¸¯ï¼Œæœ‰ä½ å°±è¸å®', 'æˆ‘çˆ±ä½ ', 'æƒ³ä½ å•¦ï¼', 'æƒ³å’Œä½ å²å²åˆå¹´å¹´',
        'æœ‰ä½ çœŸå¥½ï¼', 'å³ä½¿ç”Ÿæ´»ä¸æ˜“ï¼Œæˆ‘ä¹Ÿæƒ³è¦ä½ åœ¨æœªæ¥é‡Œ', 'çˆ±æ˜¯ä¸ä½ å…±åº¦æ¸©æŸ”çç¢',
        'æˆ‘ä¸€æ¬¡åˆä¸€æ¬¡åœ°çˆ±ä¸Šä½ ', 'æœ‰ä½ å°±åƒæœ‰äº†å…¨ä¸–ç•Œ', 'çˆ±æ˜¯å¥‡è¿¹', 'å’Œä½ åœ¨ä¸€èµ·å°±æ˜¯å¹¸ç¦',
        'ä½ æ˜¯æˆ‘çš„å”¯ä¸€', 'ä½ æ˜¯ä»å¤©è€Œé™çš„ç¤¼ç‰©', 'å–œæ¬¢ç‹¬ä¸€æ— äºŒçš„ä½ ', 'å¥½å¹¸è¿ï¼Œæˆ‘ä»¬é‡è§äº†',
        'è¢«çˆ±ç€', 'æˆ‘ä»¬ä¹‹é—´èƒœè¿‡äº†æ‰€æœ‰äºº'
      ];
      
      // é¢œè‰²é…ç½®
      const colorClasses=['text-cute-pink','text-cute-purple','text-cute-mint','text-cute-yellow','text-cute-coral','text-cute-rose','text-cute-sky','text-cute-lavender'];
      const heartColors=['rgba(255,133,162,.8)','rgba(199,146,234,.8)','rgba(137,221,255,.8)','rgba(255,203,116,.8)','rgba(255,120,81,.8)','rgba(241,91,181,.8)','rgba(0,187,249,.8)','rgba(155,93,229,.8)'];
      const backColors = [
        { main: '#FF85A2', light: '#FFB6C1' }, // ç²‰è‰²
        { main: '#C792EA', light: '#E1BEE7' }, // ç´«è‰²
        { main: '#89DDFF', light: '#BBDEFB' }, // è–„è·è‰²
        { main: '#FFCB74', light: '#FFE0B2' }  // é»„è‰²
      ];

      /* ---- å®æ—¶å¤©æ—¶åˆ†ç§’è®¡æ—¶åŠŸèƒ½ ---- */
      function initTimeCounter() {
        const counterElement = document.getElementById('timeCounter');
        
        // æ ¼å¼åŒ–æ•°å­—ä¸ºä¸¤ä½æ•°
        function formatNumber(num) {
          return num.toString().padStart(2, '0');
        }

        // æ›´æ–°æ—¶é—´å·®
        function updateTime() {
          const now = new Date();
          const timeDiff = now - START_DATE;
          const totalSeconds = Math.abs(Math.floor(timeDiff / 1000));

          // è®¡ç®—å¤©ã€æ—¶ã€åˆ†ã€ç§’
          const days = Math.floor(totalSeconds / 86400);
          const remainingSeconds = totalSeconds % 86400;
          const hours = Math.floor(remainingSeconds / 3600);
          const minutes = Math.floor((remainingSeconds % 3600) / 60);
          const seconds = remainingSeconds % 60;

          // æ ¼å¼åŒ–æ˜¾ç¤º
          const timeString = `${days}å¤©${formatNumber(hours)}æ—¶${formatNumber(minutes)}åˆ†${formatNumber(seconds)}ç§’`;
          
          if (timeDiff >= 0) {
            counterElement.textContent = `${timeString}å•¦ï¼ğŸ¥³`;
          } else {
            counterElement.textContent = `è¿˜æœ‰${timeString}å¼€å§‹ï¼ğŸ¥°`;
          }
        }

        // ç«‹å³æ›´æ–° + æ¯ç§’åˆ·æ–°
        updateTime();
        setInterval(updateTime, 1000);
      }
/* ---- éŸ³é¢‘æ’­æ”¾åŠŸèƒ½ ---- */
function initAudioPlayer() {
  // è·å–DOMå…ƒç´ 
  const audioBtn = document.getElementById('audioBtn');
  const audioPlayer = document.getElementById('audioPlayer');
  const togglePlay = document.getElementById('togglePlay');
  const progressBar = document.getElementById('progressBar');
  const currentTimeEl = document.getElementById('currentTime');
  const totalTimeEl = document.getElementById('totalTime');
  const closeAudio = document.getElementById('closeAudio');
  
  // åˆ›å»ºéŸ³é¢‘å…ƒç´  (æ›¿æ¢ä¸ºä½ çš„éŸ³é¢‘æ–‡ä»¶URL)
  const audio = new Audio('./aud/w.mp3'); // è¯·æ›¿æ¢ä¸ºå®é™…éŸ³é¢‘æ–‡ä»¶è·¯å¾„
  
  // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º
  function formatTime(seconds) {
    const mins = Math.floor(seconds / 60);
    const secs = Math.floor(seconds % 60);
    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
  }
  
  // æ›´æ–°è¿›åº¦æ¡
  function updateProgress() {
    if (isNaN(audio.duration)) return;
    
    const percent = (audio.currentTime / audio.duration) * 100;
    progressBar.style.width = `${percent}%`;
    currentTimeEl.textContent = formatTime(audio.currentTime);
    totalTimeEl.textContent = formatTime(audio.duration);
  }
  
  // åˆ‡æ¢æ’­æ”¾/æš‚åœ
  function togglePlayPause() {
    if (audio.paused) {
      audio.play();
      togglePlay.innerHTML = '<i class="fa fa-pause"></i>';
    } else {
      audio.pause();
      togglePlay.innerHTML = '<i class="fa fa-play"></i>';
    }
  }
  
  // è¿›åº¦æ¡ç‚¹å‡»è·³è½¬
  progressBar.parentElement.addEventListener('click', (e) => {
    const rect = progressBar.parentElement.getBoundingClientRect();
    const pos = (e.clientX - rect.left) / rect.width;
    audio.currentTime = pos * audio.duration;
  });
  
  // äº‹ä»¶ç›‘å¬
  audioBtn.addEventListener('click', () => {
    audioPlayer.classList.toggle('hidden');
    if (!audioPlayer.classList.contains('hidden')) {
      // æ˜¾ç¤ºæ—¶æ›´æ–°è¿›åº¦ä¿¡æ¯
      setTimeout(updateProgress, 100);
    }
  });
  
  togglePlay.addEventListener('click', togglePlayPause);
  closeAudio.addEventListener('click', () => {
    audioPlayer.classList.add('hidden');
  });
  
  audio.addEventListener('timeupdate', updateProgress);
  audio.addEventListener('loadedmetadata', updateProgress);
  
  // éŸ³é¢‘ç»“æŸæ—¶é‡ç½®çŠ¶æ€
  audio.addEventListener('ended', () => {
    togglePlay.innerHTML = '<i class="fa fa-play"></i>';
    audio.currentTime = 0;
  });
}

      /* ---- ç…§ç‰‡è½®æ’­ + ç¿»è½¬ + åŒå‡»å¤§å›¾åŠŸèƒ½ ---- */
      function initPhotoCarousel(){
        const carouselInner = document.getElementById('carouselInner');
        const carouselNav = document.getElementById('carouselNav');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        let currentPage = 0;
        const totalPages = photos.length;

        // åˆ›å»ºè½®æ’­é¡µé¢
        photos.forEach((page, pageIndex) => {
          // é¡µé¢å®¹å™¨
          const pageElement = document.createElement('div');
          pageElement.className = 'carousel-page';
          
          // ç…§ç‰‡ç½‘æ ¼
          const grid = document.createElement('div');
          grid.className = 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4';
          
          // ç”Ÿæˆæ¯é¡µ8å¼ ç…§ç‰‡
          page.forEach((src, photoIndex) => {
            const globalIndex = pageIndex * 8 + photoIndex;
            const color = backColors[Math.floor(Math.random() * backColors.length)];
            
            // ç…§ç‰‡å®¹å™¨
            const container = document.createElement('div');
            container.className = 'photo-container rounded-2xl overflow-hidden shadow-md bg-cute-lightpink/50 transition-all duration-300 hover:shadow-lg hover:scale-[1.02]';
            
            // ç¿»è½¬å¡ç‰‡
            const card = document.createElement('div');
            card.className = 'photo-card h-full';
            
            // ç…§ç‰‡æ­£é¢
            const front = document.createElement('div');
            front.className = 'photo-front';
            front.innerHTML = `<img src="${src}" alt="ç¬é—´${globalIndex + 1}" class="w-full h-full object-cover">`;
            
            // ç…§ç‰‡èƒŒé¢
            const back = document.createElement('div');
            back.className = 'photo-back';
            back.style.setProperty('--back-color', color.main);
            back.style.setProperty('--back-color-light', color.light);
            back.textContent = photoQuotes[globalIndex];
            
            // ç»„è£…å¡ç‰‡
            card.appendChild(front);
            card.appendChild(back);
            container.appendChild(card);
            grid.appendChild(container);
            
            // åŒºåˆ†å•å‡»/åŒå‡»äº‹ä»¶
            let clickTimer = null;
            card.addEventListener('click', () => {
              if (clickTimer) {
                clearTimeout(clickTimer);
                clickTimer = null;
              }
              // å•å‡»ï¼šç¿»è½¬ç…§ç‰‡
              clickTimer = setTimeout(() => {
                card.classList.toggle('flipped');
              }, 250);
            });

            // åŒå‡»ï¼šæŸ¥çœ‹å¤§å›¾
            card.addEventListener('dblclick', () => {
              if (clickTimer) {
                clearTimeout(clickTimer);
                clickTimer = null;
              }
              const imageViewer = document.getElementById('imageViewer');
              const previewImage = document.getElementById('previewImage');
              previewImage.src = src;
              imageViewer.classList.remove('hidden');
              setTimeout(() => {
                imageViewer.classList.add('active');
              }, 10);
            });
            
            // åˆå§‹å…¥åœºåŠ¨ç”»
            container.style.opacity = '0';
            container.style.transform = 'translateY(20px)';
            setTimeout(() => {
              container.style.opacity = '1';
              container.style.transform = 'translateY(0)';
              container.style.transition = 'opacity .5s ease,transform .5s ease';
            }, 300 + globalIndex * 50);
          });
          
          pageElement.appendChild(grid);
          carouselInner.appendChild(pageElement);
          
          // å¯¼èˆªç‚¹
          const dot = document.createElement('button');
          dot.className = `carousel-dot ${pageIndex === 0 ? 'active' : ''}`;
          dot.addEventListener('click', () => {
            goToPage(pageIndex);
          });
          carouselNav.appendChild(dot);
        });
        
        // è½®æ’­åˆ‡æ¢å‡½æ•°
        function goToPage(pageIndex) {
          currentPage = pageIndex;
          carouselInner.style.transform = `translateX(-${currentPage * 100}%)`;
          
          // æ›´æ–°å¯¼èˆªç‚¹çŠ¶æ€
          document.querySelectorAll('.carousel-dot').forEach((dot, index) => {
            dot.classList.toggle('active', index === currentPage);
          });
        }
        
        // ä¸Šä¸€é¡µ
        prevBtn.addEventListener('click', () => {
          currentPage = (currentPage - 1 + totalPages) % totalPages;
          goToPage(currentPage);
        });
        
        // ä¸‹ä¸€é¡µ
        nextBtn.addEventListener('click', () => {
          currentPage = (currentPage + 1) % totalPages;
          goToPage(currentPage);
        });

        // å¤§å›¾æŸ¥çœ‹å™¨å…³é—­åŠŸèƒ½
        function closeImageViewer() {
          const imageViewer = document.getElementById('imageViewer');
          imageViewer.classList.remove('active');
          setTimeout(() => {
            imageViewer.classList.add('hidden');
          }, 300);
        }

        // å…³é—­æŒ‰é’®
        document.getElementById('closeImageViewer').addEventListener('click', closeImageViewer);
        
        // ç‚¹å‡»èƒŒæ™¯å…³é—­
        document.getElementById('imageViewer').addEventListener('click', (e) => {
          if (e.target === document.getElementById('imageViewer')) {
            closeImageViewer();
          }
        });
        
        // ESCé”®å…³é—­
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            const viewer = document.getElementById('imageViewer');
            if (!viewer.classList.contains('hidden')) {
              closeImageViewer();
            }
          }
        });
      }

      /* ---- æ»¡å±ç”œè¨€èœœè¯­åŠŸèƒ½ ---- */
      function initLoveQuotes(){
        const btn=document.getElementById('loveBtn');
        const modal=document.getElementById('loveModal');
        const close=document.getElementById('closeLoveModal');
        const box=document.getElementById('quotesContainer');
        let interval,showing=false;
        let max=window.innerWidth<640?10:15;

        // å…³é—­é€»è¾‘
        function closeModal(){
          showing=false;
          modal.style.display='none';
          clearInterval(interval);
        }

        // ç»‘å®šå…³é—­äº‹ä»¶ï¼ˆåªç»‘å®šä¸€æ¬¡ï¼‰
        close.addEventListener('click', closeModal);
        modal.addEventListener('click', e=>e.target===modal&&closeModal());
        document.addEventListener('keydown', e=>e.key==='Escape'&&showing&&closeModal());
        
        // çª—å£å¤§å°é€‚é…
        window.addEventListener('resize',()=>{
          max=window.innerWidth<640?10:15;
        });

        // ç”Ÿæˆæƒ…è¯å…ƒç´ 
        function createQuote(){
          const div=document.createElement('div');
          const text=loveQuotes[Math.floor(Math.random()*loveQuotes.length)];
          const color=colorClasses[Math.floor(Math.random()*colorClasses.length)];
          
          const fs=window.innerWidth<640?'clamp(1rem,4vw,1.5rem)':'clamp(1.2rem,3vw,2rem)';
          const l=Math.random()*90;
          const t=Math.random()*90;
          const dur=3+Math.random()*2;
          
          div.className=`quote-item absolute font-bold text-shadow-cute ${color}`;
          div.textContent=text;
          div.style.fontSize=fs;
          div.style.left=`${l}%`;
          div.style.top=`${t}%`;
          div.style.setProperty('--duration',`${dur}s`);
          div.style.setProperty('--start-rotate',`${Math.random()*30-15}deg`);
          div.style.setProperty('--mid-rotate',`${Math.random()*30-15}deg`);
          div.style.setProperty('--end-rotate',`${Math.random()*30-15}deg`);
          div.classList.add('quote-animation');
          
          box.appendChild(div);
          setTimeout(()=>div.remove(),dur*1000);
        }

        // æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        btn.addEventListener('click',()=>{
          if(showing)return;
          showing=true;
          modal.style.display='block';
          box.innerHTML='';
          
          // åˆå§‹ç”Ÿæˆä¸€æ‰¹
          for(let i=0;i<max/2;i++)createQuote();
          
          // å®šæ—¶ç”Ÿæˆ
          interval=setInterval(()=>{
            const all=box.querySelectorAll('.quote-item');
            if(all.length>max){
              all[0].style.opacity='0';
              setTimeout(()=>all[0].remove(),300);
            }
            createQuote();
          },200);
        });
      }

      /* ---- æƒ…ä¹¦å¯†ç è§£é”åŠŸèƒ½ ---- */
      function initLetter(){
        const btn=document.getElementById('letterBtn');
        const content=document.getElementById('letterContent');
        const modal=document.getElementById('passwordModal');
        const input=document.getElementById('passwordInput');
        const toggle=document.getElementById('togglePassword');
        const submit=document.getElementById('submitPassword');
        const error=document.getElementById('passwordError');
        let open=false,correct=false;

        // æŒ‰é’®ç‚¹å‡»
        btn.addEventListener('click',()=>{
          if(open){
            // æ”¶èµ·ä¿¡ä»¶
            content.classList.remove('letter-expand');
            content.classList.add('letter-collapse');
            setTimeout(()=>content.style.display='none',600);
            btn.innerHTML='<i class="fa fa-envelope"></i><span>ç»™ä½ çš„ä¿¡</span>';
            open=false;
          } else {
            // æ‰“å¼€ä¿¡ä»¶
            if(correct){
              openLetter();
            } else {
              modal.classList.remove('hidden');
              input.focus();
            }
          }
        });

        // åˆ‡æ¢å¯†ç å¯è§æ€§
        toggle.addEventListener('click',()=>{
          const type=input.type==='password'?'text':'password';
          input.type=type;
          toggle.innerHTML=type==='password'?'<i class="fa fa-eye-slash"></i>':'<i class="fa fa-eye"></i>';
        });

        // éªŒè¯å¯†ç 
        function checkPassword(){
          const value=input.value.trim();
          if(value===CORRECT_PASSWORD){
            correct=true;
            modal.classList.add('hidden');
            openLetter();
          } else {
            error.classList.remove('hidden');
            input.classList.add('border-red-500');
            setTimeout(()=>input.classList.remove('border-red-500'),2000);
          }
        }

        // æäº¤å¯†ç 
        submit.addEventListener('click',checkPassword);
        input.addEventListener('keydown',e=>e.key==='Enter'&&checkPassword());

        // æ‰“å¼€ä¿¡ä»¶
        function openLetter(){
          content.style.display='block';
          content.classList.remove('letter-collapse');
          content.classList.add('letter-expand');
          btn.innerHTML='<i class="fa fa-envelope-o"></i><span>æ”¶èµ·ä¿¡ä»¶</span>';
          open=true;
          setTimeout(()=>{
            content.scrollIntoView({behavior:'smooth',block:'start'});
          },100);
        }
      }

      /* ---- é¼ æ ‡è·Ÿéšçˆ±å¿ƒåŠŸèƒ½ ---- */
      function initMouseHeart(){
        const box=document.getElementById('mouseHearts');
        let last=0,delay=50;

        document.addEventListener('mousemove',e=>{
          const now=Date.now();
          if(now-last<delay)return;
          last=now;

          // åˆ›å»ºçˆ±å¿ƒ
          const heart=document.createElement('div');
          const size=8+Math.random()*8;
          const color=heartColors[Math.floor(Math.random()*heartColors.length)];
          const rotateX=Math.random()*30-15;
          const rotateY=Math.random()*30-15;
          const duration=1+Math.random()*1;
          const offsetX=Math.random()*20-10;
          const offsetY=Math.random()*20-10;
          const finalX=Math.random()*30-15;
          const finalY=-30-Math.random()*20;

          // è®¾ç½®æ ·å¼
          heart.innerHTML='<i class="fa fa-heart"></i>';
          heart.style.cssText=`
            position:absolute;
            left:${e.clientX+offsetX}px;
            top:${e.clientY+offsetY}px;
            font-size:${size}px;
            color:${color};
            transform:translate(-50%,-50%) rotate(${rotateX}deg);
            z-index:10;
            pointer-events:none;
          `;
          heart.style.setProperty('--heart-duration',`${duration}s`);
          heart.style.setProperty('--heart-rotate',`${rotateX}deg`);
          heart.style.setProperty('--heart-rotate-end',`${rotateY}deg`);
          heart.style.setProperty('--heart-x',`${finalX}px`);
          heart.style.setProperty('--heart-y',`${finalY}px`);
          heart.classList.add('heart-float');

          // æ·»åŠ åˆ°é¡µé¢
          box.appendChild(heart);
          setTimeout(()=>heart.remove(),duration*1000);
        });
      }

      /* ---- èƒŒæ™¯é£˜åŠ¨çˆ±å¿ƒç”Ÿæˆ ---- */
      function createFloatingHearts() {
        const container = document.getElementById('floatingHearts');
        const colors = ['text-cute-pink', 'text-cute-purple', 'text-cute-yellow', 'text-cute-rose', 'text-cute-mint', 'text-cute-lavender'];
        const sizes = ['text-xs', 'text-sm', 'text-base', 'text-lg', 'text-xl'];
        const total = 20; // çˆ±å¿ƒæ•°é‡

        // æ¸…ç©ºå®¹å™¨
        container.innerHTML = '';

        // ç”Ÿæˆçˆ±å¿ƒ
        for (let i = 0; i < total; i++) {
          const heart = document.createElement('i');
          // éšæœºå±æ€§
          const color = colors[Math.floor(Math.random() * colors.length)];
          const size = sizes[Math.floor(Math.random() * sizes.length)];
          const top = Math.random() * 100;
          const left = Math.random() * 100;
          const duration = 8 + Math.random() * 10;
          const delay = Math.random() * 5;
          const opacity = 0.3 + Math.random() * 0.4;

          // è®¾ç½®æ ·å¼
          heart.className = `fa fa-heart ${color} ${size} absolute float-cute`;
          heart.style.top = `${top}%`;
          heart.style.left = `${left}%`;
          heart.style.animationDuration = `${duration}s`;
          heart.style.animationDelay = `${delay}s`;
          heart.style.opacity = opacity;

          // æ·»åŠ åˆ°å®¹å™¨
          container.appendChild(heart);
        }
      }

      /* ---- åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½ ---- */
      document.addEventListener('DOMContentLoaded',()=>{
        initTimeCounter();       // è®¡æ—¶
        initPhotoCarousel();     // ç…§ç‰‡è½®æ’­
        initLoveQuotes();        // æ»¡å±æƒ…è¯
        initLetter();            // æƒ…ä¹¦
        initMouseHeart();        // é¼ æ ‡çˆ±å¿ƒ
        createFloatingHearts();  // èƒŒæ™¯çˆ±å¿ƒ
        initAudioPlayer();
      });
    })();
  </script>
</body>
</html>